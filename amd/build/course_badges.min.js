define ("mod_coursebadges/course_badges",["jquery","core/str","mod_coursebadges/jtable"],function(a,b){return{initJtable:function(c,d,e,f){var g=M.cfg.wwwroot;a("head").append("<link rel=\"stylesheet\" type=\"text/css\" href=\""+g+"/lib/jquery/ui-1.12.1/jquery-ui.min.css\">");c=a("input[name=\""+c+"\"]").val();c=JSON.parse(c);if(c.imgurl){c.imgurl.display=function(a){if(a.record.badgeurl){return"<a href=\""+a.record.badgeurl+"\"><img class=\"cb_overviewbadge\" src=\""+a.record.imgurl+"\"/></a>"}return"<img class=\"cb_overviewbadge\" src=\""+a.record.imgurl+"\"/>"}}if(c.modname){c.modname.display=function(a){for(var b=a.record,c="",d=0;d<b.modnames.length;d++){c+=b.modnames[d].name+"<br/>"}return c}}if(c.percent){c.percent.display=function(a){var b=a.record;if(b.urlearnedbadge&&b.urlselectedbadge){return"<p><a href=\""+b.urlearnedbadge+"\">"+b.badgeearnedcount+"</a>/<a href=\""+b.urlselectedbadge+"\">"+b.badgetotal+"</a> ("+b.badgepercent+"%)</p>"}return"<p>"+b.badgeearnedcount+"/"+b.badgetotal+" ("+b.badgepercent+"%)</p>"}}if(c.groupnames){c.groupnames.display=function(a){for(var b=a.record,c="",d=0;d<b.groupnames.length;d++){c+=b.groupnames[d].name+"<br/>"}return c}}if(c.earnedbadges){c.earnedbadges.display=function(a){for(var b=a.record,c="",d=0;d<b.earnedbadges.length;d++){if(b.earnedbadges[d].badge_url){c+="<a href=\""+b.earnedbadges[d].badge_url+"\"><img class=\"cb_overviewbadge_mini\" src=\""+b.earnedbadges[d].img_url+"\"/></a>"}else{c+="<img class=\"cb_overviewbadge_mini\" src=\""+b.earnedbadges[d].img_url+"\"/>"}}return c}}if(c.selectedbadges){c.selectedbadges.display=function(a){for(var b=a.record,c="",d=0;d<b.selectedbadges.length;d++){if(b.selectedbadges[d].badge_url){c+="<a href=\""+b.selectedbadges[d].badge_url+"\"><img class=\"cb_overviewbadge_mini\" src=\""+b.selectedbadges[d].img_url+"\"/></a>"}else{c+="<img class=\"cb_overviewbadge_mini\" src=\""+b.selectedbadges[d].img_url+"\"/>"}}return c}}var h=a("#"+d).jtable({paging:!0,pageSize:10,pageSizes:[10,25,50,100],selecting:!1,multiselect:!1,sorting:!0,defaultSorting:f,jqueryuiTheme:!0,defaultDateFormat:b.get_string("dateformat","mod_coursebadges"),gotoPageArea:"none",actions:{listAction:function listAction(b,c){return a.Deferred(function(d){b=a("#mform1").serialize();a.ajax({url:e+"&si="+c.jtStartIndex+"&ps="+c.jtPageSize+"&so="+c.jtSorting,type:"POST",dataType:"json",data:b,success:function success(a){d.resolve(a)},error:function error(){d.reject()}})})}},fields:c});h.jtable("load")},initSelectOverview:function(){a("#mform1 select").change(function(){a("#results").jtable("load")})},initNameInput:function(b){var c;a("#mform1 input[name=\""+b+"\"]").on("keyup",function(){clearTimeout(c);c=setTimeout(function(){a("#results").jtable("load")},500)})}}});
//# sourceMappingURL=course_badges.min.js.map
