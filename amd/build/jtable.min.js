define ("mod_coursebadges/jtable",["jquery","jqueryui"],function(){(function(t){var e;t(window).on("beforeunload",function(){e=!0});t(window).on("unload",function(){e=!1});t.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:!0,defaultDateFormat:"yy-mm-dd",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:!1,loadingAnimationDelay:500,saveUserPreferences:!0,jqueryuiTheme:!1,unAuthorizedRequestRedirectUrl:null,ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:!0,hoverAnimationDuration:60,hoverAnimationEasing:void 0,items:[]},closeRequested:function closeRequested(){},formCreated:function formCreated(){},formSubmitting:function formSubmitting(){},formClosed:function formClosed(){},loadingRecords:function loadingRecords(){},recordsLoaded:function recordsLoaded(){},rowInserted:function rowInserted(){},rowsRemoved:function rowsRemoved(){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function _create(){this._normalizeFieldsOptions();this._initializeFields();this._createFieldAndColumnList();this._createMainContainer();this._createTableTitle();this._createToolBar();this._createTable();this._createBusyPanel();this._createErrorDialogDiv();this._addNoDataRow();this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function _normalizeFieldsOptions(){var e=this;t.each(e.options.fields,function(t,o){e._normalizeFieldOptions(t,o)})},_normalizeFieldOptions:function _normalizeFieldOptions(e,o){void 0==o.listClass&&(o.listClass="");void 0==o.inputClass&&(o.inputClass="");if(o.dependsOn&&"string"===t.type(o.dependsOn)){var a=o.dependsOn.split(",");o.dependsOn=[];for(var i=0;i<a.length;i++){o.dependsOn.push(t.trim(a[i]))}}},_initializeFields:function _initializeFields(){this._lastPostData={};this._$tableRows=[];this._columnList=[];this._fieldList=[];this._cache=[]},_createFieldAndColumnList:function _createFieldAndColumnList(){var e=this;t.each(e.options.fields,function(t,o){e._fieldList.push(t);!0==o.key&&(e._keyField=t);!1!=o.list&&"hidden"!=o.type&&e._columnList.push(t)})},_createMainContainer:function _createMainContainer(){this._$mainContainer=t("<div />").addClass("jtable-main-container").appendTo(this.element);this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget")},_createTableTitle:function _createTableTitle(){var e=this;if(e.options.title){var o=t("<div />").addClass("jtable-title").appendTo(e._$mainContainer);e._jqueryuiThemeAddClass(o,"ui-widget-header");t("<div />").addClass("jtable-title-text").appendTo(o).append(e.options.title);if(e.options.showCloseButton){var a=t("<span />").html(e.options.messages.close);t("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",e.options.messages.close).append(a).appendTo(o).click(function(t){t.preventDefault();t.stopPropagation();e._onCloseRequested()})}e._$titleDiv=o}},_createTable:function _createTable(){this._$table=t("<table></table>").addClass("jtable").appendTo(this._$mainContainer);this.options.tableId&&this._$table.attr("id",this.options.tableId);this._jqueryuiThemeAddClass(this._$table,"ui-widget-content");this._createTableHead();this._createTableBody()},_createTableHead:function _createTableHead(){var e=t("<thead></thead>").appendTo(this._$table);this._addRowToTableHead(e)},_addRowToTableHead:function _addRowToTableHead(e){e=t("<tr></tr>").appendTo(e);this._addColumnsToHeaderRow(e)},_addColumnsToHeaderRow:function _addColumnsToHeaderRow(e){for(var t=0,o;t<this._columnList.length;t++){o=this._columnList[t];this._createHeaderCellForField(o,this.options.fields[o]).appendTo(e)}},_createHeaderCellForField:function _createHeaderCellForField(e,o){o.width=o.width||"10%";var a=t("<span />").addClass("jtable-column-header-text").html(o.title),a=t("<div />").addClass("jtable-column-header-container").append(a),a=t("<th></th>").addClass("jtable-column-header").addClass(o.listClass).css("width",o.width).data("fieldName",e).append(a);this._jqueryuiThemeAddClass(a,"ui-state-default");return a},_createEmptyCommandHeader:function _createEmptyCommandHeader(){var e=t("<th></th>").addClass("jtable-command-column-header").css("width","1%");this._jqueryuiThemeAddClass(e,"ui-state-default");return e},_createTableBody:function _createTableBody(){this._$tableBody=t("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function _createBusyPanel(){this._$busyMessageDiv=t("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer);this._$busyDiv=t("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer);this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header");this._hideBusy()},_createErrorDialogDiv:function _createErrorDialogDiv(){var e=this;e._$errorDialogDiv=t("<div></div>").appendTo(e._$mainContainer);e._$errorDialogDiv.dialog({autoOpen:!1,show:e.options.dialogShowEffect,hide:e.options.dialogHideEffect,modal:!0,title:e.options.messages.error,buttons:[{text:e.options.messages.close,click:function click(){e._$errorDialogDiv.dialog("close")}}]})},load:function load(e,t){this._lastPostData=e;this._reloadTable(t)},reload:function reload(e){this._reloadTable(e)},getRowByKey:function getRowByKey(e){for(var t=0;t<this._$tableRows.length;t++){if(e==this._getKeyValueOfRecord(this._$tableRows[t].data("record")))return this._$tableRows[t]}return null},destroy:function destroy(){this.element.empty();t.Widget.prototype.destroy.call(this)},_setOption:function _setOption(){},_reloadTable:function _reloadTable(e){var o=this,i=function(t){o._hideBusy();"OK"!=t.Result?o._showError(t.Message):(o._removeAllRows("reloading"),o._addRecordsToTable(t.Records),o._onRecordsLoaded(t),e&&e())};o._showBusy(o.options.messages.loadingMessage,o.options.loadingAnimationDelay);o._onLoadingRecords();if(t.isFunction(o.options.actions.listAction)){var a=o.options.actions.listAction(o._lastPostData,o._createJtParamsForLoading());o._isDeferredObject(a)?a.done(function(e){i(e)}).fail(function(){o._showError(o.options.messages.serverCommunicationError)}).always(function(){o._hideBusy()}):i(a)}else a=o._createRecordLoadUrl(),o._ajax({url:a,data:o._lastPostData,success:function success(e){i(e)},error:function error(){o._hideBusy();o._showError(o.options.messages.serverCommunicationError)}})},_createRecordLoadUrl:function _createRecordLoadUrl(){return this.options.actions.listAction},_createJtParamsForLoading:function _createJtParamsForLoading(){return{}},_createRowFromRecord:function _createRowFromRecord(e){e=t("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(e)).data("record",e);this._addCellsToRowUsingRecord(e);return e},_addCellsToRowUsingRecord:function _addCellsToRowUsingRecord(e){for(var t=e.data("record"),o=0;o<this._columnList.length;o++){this._createCellForRecordField(t,this._columnList[o]).appendTo(e)}},_createCellForRecordField:function _createCellForRecordField(e,o){return t("<td></td>").addClass(this.options.fields[o].listClass).append(this._getDisplayTextForRecordField(e,o))},_addRecordsToTable:function _addRecordsToTable(e){var o=this;t.each(e,function(e,t){o._addRow(o._createRowFromRecord(t))});o._refreshRowStyles()},_addRowToTable:function _addRowToTable(e,t,o,a){t={index:this._normalizeNumber(t,0,this._$tableRows.length,this._$tableRows.length)};!0==o&&(t.isNewRow=!0);!1==a&&(t.animationsEnabled=!1);this._addRow(e,t)},_addRow:function _addRow(e,o){o=t.extend({index:this._$tableRows.length,isNewRow:!1,animationsEnabled:!0},o);0>=this._$tableRows.length&&this._removeNoDataRow();o.index=this._normalizeNumber(o.index,0,this._$tableRows.length,this._$tableRows.length);o.index==this._$tableRows.length?(this._$tableBody.append(e),this._$tableRows.push(e)):0==o.index?(this._$tableBody.prepend(e),this._$tableRows.unshift(e)):(this._$tableRows[o.index-1].after(e),this._$tableRows.splice(o.index,0,e));this._onRowInserted(e,o.isNewRow);o.isNewRow&&(this._refreshRowStyles(),this.options.animationsEnabled&&o.animationsEnabled&&this._showNewRowAnimation(e))},_showNewRowAnimation:function _showNewRowAnimation(e){var t="jtable-row-created";this.options.jqueryuiTheme&&(t+=" ui-state-highlight");e.addClass(t,"slow","",function(){e.removeClass(t,5E3)})},_removeRowsFromTable:function _removeRowsFromTable(e,o){var i=this;0>=e.length||(e.addClass("jtable-row-removed").remove(),e.each(function(){var e=i._findRowIndex(t(this));0<=e&&i._$tableRows.splice(e,1)}),i._onRowsRemoved(e,o),0==i._$tableRows.length&&i._addNoDataRow(),i._refreshRowStyles())},_findRowIndex:function _findRowIndex(e){return this._findIndexInArray(e,this._$tableRows,function(e,t){return e.data("record")==t.data("record")})},_removeAllRows:function _removeAllRows(e){if(!(0>=this._$tableRows.length)){var t=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty();this._$tableRows=[];this._onRowsRemoved(t,e);this._addNoDataRow()}},_addNoDataRow:function _addNoDataRow(){if(!(0<this._$tableBody.find(">tr.jtable-no-data-row").length)){var e=t("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody),o=this._$table.find("thead th").length;t("<td></td>").attr("colspan",o).html(this.options.messages.noDataAvailable).appendTo(e)}},_removeNoDataRow:function _removeNoDataRow(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function _refreshRowStyles(){for(var e=0;e<this._$tableRows.length;e++){0==e%2?this._$tableRows[e].addClass("jtable-row-even"):this._$tableRows[e].removeClass("jtable-row-even")}},_getDisplayTextForRecordField:function _getDisplayTextForRecordField(e,t){var o=this.options.fields[t],a=e[t];return o.display?o.display({record:e}):"date"==o.type?this._getDisplayTextForDateRecordField(o,a):"checkbox"==o.type?this._getCheckBoxTextForFieldByValue(t,a):o.options?(o=this._getOptionsForField(t,{record:e,value:a,source:"list",dependedValues:this._createDependedValuesUsingRecord(e,o.dependsOn)}),this._findOptionByValue(o,a).DisplayText):a},_createDependedValuesUsingRecord:function _createDependedValuesUsingRecord(e,t){if(!t)return{};for(var o={},a=0;a<t.length;a++){o[t[a]]=e[t[a]]}return o},_findOptionByValue:function _findOptionByValue(e,t){for(var o=0;o<e.length;o++){if(e[o].Value==t)return e[o]}return{}},_getDisplayTextForDateRecordField:function _getDisplayTextForDateRecordField(e,o){if(!o)return"";var a=e.displayFormat||this.options.defaultDateFormat,i=this._parseDate(o);return t.datepicker.formatDate(a,i)},_getOptionsForField:function _getOptionsForField(o,a){var i=this.options.fields[o],n=i.options;t.isFunction(n)&&(a=t.extend(!0,{_cacheCleared:!1,dependedValues:{},clearCache:function clearCache(){this._cacheCleared=!0}},a),n=n(a));if("string"==typeof n){var s="options_"+o+"_"+n;a._cacheCleared||!this._cache[s]?(this._cache[s]=this._buildOptionsFromArray(this._downloadOptions(o,n)),this._sortFieldOptions(this._cache[s],i.optionsSorting)):void 0!=a.value&&void 0==this._findOptionByValue(this._cache[s],a.value).DisplayText&&(this._cache[s]=this._buildOptionsFromArray(this._downloadOptions(o,n)),this._sortFieldOptions(this._cache[s],i.optionsSorting));n=this._cache[s]}else n=jQuery.isArray(n)?this._buildOptionsFromArray(n):this._buildOptionsArrayFromObject(n),this._sortFieldOptions(n,i.optionsSorting);return n},_downloadOptions:function _downloadOptions(e,t){var o=this,i=[];o._ajax({url:t,async:!1,success:function success(e){"OK"!=e.Result?o._showError(e.Message):i=e.Options},error:function error(){var t=o._formatString(o.options.messages.cannotLoadOptionsFor,e);o._showError(t)}});return i},_sortFieldOptions:function _sortFieldOptions(e,o){if(e&&e.length&&o){var i=0==o.indexOf("value")?function(e){return e.Value}:function(e){return e.DisplayText};var n="string"==t.type(i(e[0]))?function(e,t){return i(e).localeCompare(i(t))}:function(e,t){return i(e)-i(t)};0<o.indexOf("desc")?e.sort(function(e,t){return n(t,e)}):e.sort(function(e,t){return n(e,t)})}},_buildOptionsArrayFromObject:function _buildOptionsArrayFromObject(e){var o=[];t.each(e,function(e,t){o.push({Value:e,DisplayText:t})});return o},_buildOptionsFromArray:function _buildOptionsFromArray(e){for(var o=[],a=0;a<e.length;a++){t.isPlainObject(e[a])?o.push(e[a]):o.push({Value:e[a],DisplayText:e[a]})}return o},_parseDate:function _parseDate(e){if(0<=e.indexOf("Date"))return new Date(parseInt(e.substr(6),10));if(10==e.length)return new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(5,2),10)-1,parseInt(e.substr(8,2),10));if(19==e.length)return new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(5,2),10)-1,parseInt(e.substr(8,2,10)),parseInt(e.substr(11,2),10),parseInt(e.substr(14,2),10),parseInt(e.substr(17,2),10));this._logWarn("Given date is not properly formatted: "+e);return"format error!"},_createToolBar:function _createToolBar(){this._$toolbarDiv=t("<div />").addClass("jtable-toolbar").appendTo(this._$titleDiv);for(var e=0;e<this.options.toolbar.items.length;e++){this._addToolBarItem(this.options.toolbar.items[e])}},_addToolBarItem:function _addToolBarItem(o){if(void 0==o||void 0==o.text&&void 0==o.icon)return this._logWarn("Can not add tool bar item since it is not valid!"),this._logWarn(o),null;var a=t("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);this._jqueryuiThemeAddClass(a,"ui-widget ui-state-default ui-corner-all","ui-state-hover");o.cssClass&&a.addClass(o.cssClass);o.tooltip&&a.attr("title",o.tooltip);if(o.icon){var i=t("<span class=\"jtable-toolbar-item-icon\"></span>").appendTo(a);!0!==o.icon&&t.type("string"===o.icon)&&i.css("background","url(\""+o.icon+"\")")}o.text&&t("<span class=\"\"></span>").html(o.text).addClass("jtable-toolbar-item-text").appendTo(a);o.click&&a.click(function(){o.click()});var n,s;this.options.toolbar.hoverAnimation&&(n=this.options.toolbar.hoverAnimationDuration,s=this.options.toolbar.hoverAnimationEasing);a.hover(function(){a.addClass("jtable-toolbar-item-hover",n,s)},function(){a.removeClass("jtable-toolbar-item-hover",n,s)});return a},_showError:function _showError(e){this._$errorDialogDiv.html(e).dialog("open")},_setBusyTimer:null,_showBusy:function _showBusy(e,t){var o=this;o._$busyDiv.width(o._$mainContainer.width()).height(o._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var a=function(){o._$busyDiv.removeClass("jtable-busy-panel-background-invisible");o._$busyMessageDiv.html(e).show()};t?o._setBusyTimer||(o._setBusyTimer=setTimeout(a,t)):a()},_hideBusy:function _hideBusy(){clearTimeout(this._setBusyTimer);this._setBusyTimer=null;this._$busyDiv.hide();this._$busyMessageDiv.html("").hide()},_isBusy:function _isBusy(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function _jqueryuiThemeAddClass(e,t,o){this.options.jqueryuiTheme&&(e.addClass(t),o&&e.hover(function(){e.addClass(o)},function(){e.removeClass(o)}))},_performAjaxCall:function _performAjaxCall(t,o,a,i,n){this._ajax({url:t,data:o,async:a,success:i,error:n})},_unAuthorizedRequestHandler:function _unAuthorizedRequestHandler(){this.options.unAuthorizedRequestRedirectUrl?location.href=this.options.unAuthorizedRequestRedirectUrl:location.reload(!0)},_ajax:function _ajax(o){var a=this,i={statusCode:{401:function _(){a._unAuthorizedRequestHandler()}}},i=t.extend(i,this.options.ajaxSettings,o);i.success=function(e){e&&!0==e.UnAuthorizedRequest&&a._unAuthorizedRequestHandler();o.success&&o.success(e)};i.error=function(t){e?t.abort():o.error&&o.error(arguments)};i.complete=function(){o.complete&&o.complete()};t.ajax(i)},_getKeyValueOfRecord:function _getKeyValueOfRecord(e){return e[this._keyField]},_setCookie:function _setCookie(e,t){e=this._cookieKeyPrefix+e;var o=new Date;o.setDate(o.getDate()+30);document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+o.toUTCString()},_getCookie:function _getCookie(e){e=this._cookieKeyPrefix+e;for(var t=document.cookie.split("; "),o=0;o<t.length;o++){if(t[o]){var i=t[o].split("=");if(2==i.length&&decodeURIComponent(i[0])===e)return decodeURIComponent(i[1]||"")}}return null},_generateCookieKeyPrefix:function _generateCookieKeyPrefix(){var e="";this.options.tableId&&(e=e+this.options.tableId+"#");e=e+this._columnList.join("$")+"#c"+this._$table.find("thead th").length;var t=0;if(0!=e.length)for(var o=0;o<e.length;o++){var i=e.charCodeAt(o),t=(t<<5)-t+i,t=t&t}return"jtable#"+t},_onLoadingRecords:function _onLoadingRecords(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function _onRecordsLoaded(e){this._trigger("recordsLoaded",null,{records:e.Records,serverResponse:e})},_onRowInserted:function _onRowInserted(e,t){this._trigger("rowInserted",null,{row:e,record:e.data("record"),isNewRow:t})},_onRowsRemoved:function _onRowsRemoved(e,t){this._trigger("rowsRemoved",null,{rows:e,reason:t})},_onCloseRequested:function _onCloseRequested(){this._trigger("closeRequested",null,{})}})})(jQuery);(function(e){e.extend(!0,e.hik.jtable.prototype,{_getPropertyOfObject:function _getPropertyOfObject(e,t){if(0>t.indexOf("."))return e[t];var o=t.substring(0,t.indexOf(".")),a=t.substring(t.indexOf(".")+1);return this._getPropertyOfObject(e[o],a)},_setPropertyOfObject:function _setPropertyOfObject(e,t,o){if(0>t.indexOf("."))e[t]=o;else{var i=t.substring(0,t.indexOf("."));t=t.substring(t.indexOf(".")+1);this._setPropertyOfObject(e[i],t,o)}},_insertToArrayIfDoesNotExists:function _insertToArrayIfDoesNotExists(t,o){0>e.inArray(o,t)&&t.push(o)},_findIndexInArray:function _findIndexInArray(e,t,o){o||(o=function(e,t){return e==t});for(var a=0;a<t.length;a++){if(o(e,t[a]))return a}return-1},_normalizeNumber:function _normalizeNumber(e,t,o,a){return void 0==e||null==e||isNaN(e)?a:e<t?t:e>o?o:e},_formatString:function _formatString(){if(0==arguments.length)return null;for(var e=arguments[0],t=1;t<arguments.length;t++){e=e.replace("{"+(t-1)+"}",arguments[t])}return e},_isDeferredObject:function _isDeferredObject(e){return e.then&&e.done&&e.fail},_logDebug:function _logDebug(e){window.console&&console.log("jTable DEBUG: "+e)},_logInfo:function _logInfo(e){window.console&&console.log("jTable INFO: "+e)},_logWarn:function _logWarn(e){window.console&&console.log("jTable WARNING: "+e)},_logError:function _logError(e){window.console&&console.log("jTable ERROR: "+e)}});Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var o=this.length,a=+t||0,a=0>a?Math.ceil(a):Math.floor(a);for(0>a&&(a+=o);a<o;a++){if(a in this&&this[a]===e)return a}return-1})})(jQuery);(function(t){t.extend(!0,t.hik.jtable.prototype,{_submitFormUsingAjax:function _submitFormUsingAjax(e,t,o,a){this._ajax({url:e,data:t,success:o,error:a})},_createInputLabelForRecordField:function _createInputLabelForRecordField(e){return t("<div />").addClass("jtable-input-label").html(this.options.fields[e].inputTitle||this.options.fields[e].title)},_createInputForRecordField:function _createInputForRecordField(o){var i=o.fieldName,a=o.value,n=o.record,s=o.formType;o=o.form;var d=this.options.fields[i];if(void 0==a||null==a)a=d.defaultValue;return d.input?(a=t(d.input({value:a,record:n,formType:s,form:o})),a.attr("id")||a.attr("id","Edit-"+i),t("<div />").addClass("jtable-input jtable-custom-input").append(a)):"date"==d.type?this._createDateInputForField(d,i,a):"textarea"==d.type?this._createTextAreaForField(d,i,a):"password"==d.type?this._createPasswordInputForField(d,i,a):"checkbox"==d.type?this._createCheckboxForField(d,i,a):d.options?"radiobutton"==d.type?this._createRadioButtonListForField(d,i,a,n,s):this._createDropDownListForField(d,i,a,n,s,o):this._createTextInputForField(d,i,a)},_createInputForHidden:function _createInputForHidden(e,o){void 0==o&&(o="");return t("<input type=\"hidden\" name=\""+e+"\" id=\"Edit-"+e+"\"></input>").val(o)},_createDateInputForField:function _createDateInputForField(e,o,i){o=t("<input class=\""+e.inputClass+"\" id=\"Edit-"+o+"\" type=\"text\" name=\""+o+"\"></input>");void 0!=i&&o.val(i);o.datepicker({dateFormat:e.displayFormat||this.options.defaultDateFormat});return t("<div />").addClass("jtable-input jtable-date-input").append(o)},_createTextAreaForField:function _createTextAreaForField(e,o,a){e=t("<textarea class=\""+e.inputClass+"\" id=\"Edit-"+o+"\" name=\""+o+"\"></textarea>");void 0!=a&&e.val(a);return t("<div />").addClass("jtable-input jtable-textarea-input").append(e)},_createTextInputForField:function _createTextInputForField(e,o,a){e=t("<input class=\""+e.inputClass+"\" id=\"Edit-"+o+"\" type=\"text\" name=\""+o+"\"></input>");void 0!=a&&e.val(a);return t("<div />").addClass("jtable-input jtable-text-input").append(e)},_createPasswordInputForField:function _createPasswordInputForField(e,o,a){e=t("<input class=\""+e.inputClass+"\" id=\"Edit-"+o+"\" type=\"password\" name=\""+o+"\"></input>");void 0!=a&&e.val(a);return t("<div />").addClass("jtable-input jtable-password-input").append(e)},_createCheckboxForField:function _createCheckboxForField(o,i,a){var n=this;void 0==a&&(a=n._getCheckBoxPropertiesForFieldByState(i,!1).Value);var s=t("<div />").addClass("jtable-input jtable-checkbox-input"),d=t("<input class=\""+o.inputClass+"\" id=\"Edit-"+i+"\" type=\"checkbox\" name=\""+i+"\" />").appendTo(s);void 0!=a&&d.val(a);var e=t("<span>"+(o.formText||n._getCheckBoxTextForFieldByValue(i,a))+"</span>").appendTo(s);n._getIsCheckBoxSelectedForFieldByValue(i,a)&&d.attr("checked","checked");var r=function(){var t=n._getCheckBoxPropertiesForFieldByState(i,d.is(":checked"));d.attr("value",t.Value);e.html(o.formText||t.DisplayText)};d.click(function(){r()});!1!=o.setOnTextClick&&e.addClass("jtable-option-text-clickable").click(function(){d.is(":checked")?d.attr("checked",!1):d.attr("checked",!0);r()});return s},_createDropDownListForField:function _createDropDownListForField(o,i,a,n,s,d){var e=t("<div />").addClass("jtable-input jtable-dropdown-input"),r=t("<select class=\""+o.inputClass+"\" id=\"Edit-"+i+"\" name=\""+i+"\"></select>").appendTo(e);o=this._getOptionsForField(i,{record:n,source:s,form:d,dependedValues:this._createDependedValuesUsingForm(d,o.dependsOn)});this._fillDropDownListWithOptions(r,o,a);return e},_fillDropDownListWithOptions:function _fillDropDownListWithOptions(e,o,a){e.empty();for(var i=0;i<o.length;i++){t("<option"+(o[i].Value==a?" selected=\"selected\"":"")+">"+o[i].DisplayText+"</option>").val(o[i].Value).appendTo(e)}},_createDependedValuesUsingForm:function _createDependedValuesUsingForm(t,o){if(!o)return{};for(var a={},i=0;i<o.length;i++){var n=o[i],s=t.find("select[name="+n+"]");0>=s.length||(a[n]=s.val())}return a},_createRadioButtonListForField:function _createRadioButtonListForField(o,i,a,n,s){var r=t("<div />").addClass("jtable-input jtable-radiobuttonlist-input");n=this._getOptionsForField(i,{record:n,source:s});t.each(n,function(e,n){var s=t("<div class=\"\"></div>").addClass("jtable-radio-input").appendTo(r),d=t("<input type=\"radio\" id=\"Edit-"+i+"-"+e+"\" class=\""+o.inputClass+"\" name=\""+i+"\""+(n.Value==a+""?" checked=\"true\"":"")+" />").val(n.Value).appendTo(s),s=t("<span></span>").html(n.DisplayText).appendTo(s);!1!=o.setOnTextClick&&s.addClass("jtable-option-text-clickable").click(function(){d.is(":checked")||d.attr("checked",!0)})});return r},_getCheckBoxTextForFieldByValue:function _getCheckBoxTextForFieldByValue(e,t){return this.options.fields[e].values[t]},_getIsCheckBoxSelectedForFieldByValue:function _getIsCheckBoxSelectedForFieldByValue(e,t){return this._createCheckBoxStateArrayForFieldWithCaching(e)[1].Value.toString()==t.toString()},_getCheckBoxPropertiesForFieldByState:function _getCheckBoxPropertiesForFieldByState(e,t){return this._createCheckBoxStateArrayForFieldWithCaching(e)[t?1:0]},_createCheckBoxStateArrayForFieldWithCaching:function _createCheckBoxStateArrayForFieldWithCaching(e){var t="checkbox_"+e;this._cache[t]||(this._cache[t]=this._createCheckBoxStateArrayForField(e));return this._cache[t]},_createCheckBoxStateArrayForField:function _createCheckBoxStateArrayForField(e){var o=[],a=0;t.each(this.options.fields[e].values,function(e,t){2>a++&&o.push({Value:e,DisplayText:t})});return o},_makeCascadeDropDowns:function _makeCascadeDropDowns(o,i,a){var n=this;o.find("select").each(function(){var s=t(this),d=s.attr("name");if(d){var e=n.options.fields[d];e.dependsOn&&t.each(e.dependsOn,function(t,r){o.find("select[name="+r+"]").change(function(){var t={record:i,source:a,form:o,dependedValues:{},dependedValues:n._createDependedValuesUsingForm(o,e.dependsOn)};t=n._getOptionsForField(d,t);n._fillDropDownListWithOptions(s,t,void 0);s.change()})})}})},_updateRecordValuesFromForm:function _updateRecordValuesFromForm(o,i){for(var a=0;a<this._fieldList.length;a++){var n=this._fieldList[a],s=this.options.fields[n];if(!1!=s.edit){var d=i.find("[name=\""+n+"\"]");if(!(0>=d.length))if("date"==s.type){if(d=d.val()){s=s.displayFormat||this.options.defaultDateFormat;try{var r=t.datepicker.parseDate(s,d);o[n]="/Date("+r.getTime()+")/"}catch(e){this._logWarn("Date format is incorrect for field "+n+": "+d),o[n]=void 0}}else this._logDebug("Date is empty for "+n),o[n]=void 0;}else s.options&&"radiobutton"==s.type?(s=d.filter(":checked"),o[n]=s.length?s.val():void 0):o[n]=d.val()}}},_setEnabledOfDialogButton:function _setEnabledOfDialogButton(e,t,o){e&&(!1!=t?e.removeAttr("disabled").removeClass("ui-state-disabled"):e.attr("disabled","disabled").addClass("ui-state-disabled"),o&&e.find("span").text(o))}})})(jQuery);(function(t){var e=t.hik.jtable.prototype._create;t.extend(!0,t.hik.jtable.prototype,{options:{recordAdded:function recordAdded(){},messages:{addNewRecord:"Add new record"}},_$addRecordDiv:null,_create:function _create(){e.apply(this,arguments);this.options.actions.createAction&&this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function _createAddRecordDialogDiv(){var e=this;e._$addRecordDiv=t("<div />").appendTo(e._$mainContainer);e._$addRecordDiv.dialog({autoOpen:!1,show:e.options.dialogShowEffect,hide:e.options.dialogHideEffect,width:"auto",minWidth:"300",modal:!0,title:e.options.messages.addNewRecord,buttons:[{text:e.options.messages.cancel,click:function click(){e._$addRecordDiv.dialog("close")}},{id:"AddRecordDialogSaveButton",text:e.options.messages.save,click:function click(){e._onSaveClickedOnCreateForm()}}],close:function close(){var t=e._$addRecordDiv.find("form").first(),o=e._$addRecordDiv.parent().find("#AddRecordDialogSaveButton");e._trigger("formClosed",null,{form:t,formType:"create"});e._setEnabledOfDialogButton(o,!0,e.options.messages.save);t.remove()}});e.options.addRecordButton?e.options.addRecordButton.click(function(t){t.preventDefault();e._showAddRecordForm()}):e._addToolBarItem({icon:!0,cssClass:"jtable-toolbar-item-add-record",text:e.options.messages.addNewRecord,click:function click(){e._showAddRecordForm()}})},_onSaveClickedOnCreateForm:function _onSaveClickedOnCreateForm(){var e=this._$addRecordDiv.parent().find("#AddRecordDialogSaveButton"),t=this._$addRecordDiv.find("form");!1!=this._trigger("formSubmitting",null,{form:t,formType:"create"})&&(this._setEnabledOfDialogButton(e,!1,this.options.messages.saving),this._saveAddRecordForm(t,e))},showCreateForm:function showCreateForm(){this._showAddRecordForm()},addRecord:function addRecord(e){var o=this;e=t.extend({clientOnly:!1,animationsEnabled:o.options.animationsEnabled,success:function success(){},error:function error(){}},e);if(e.record){if(e.clientOnly)o._addRow(o._createRowFromRecord(e.record),{isNewRow:!0,animationsEnabled:e.animationsEnabled}),e.success();else{var i=function(t){"OK"!=t.Result?(o._showError(t.Message),e.error(t)):t.Record?(o._onRecordAdded(t),o._addRow(o._createRowFromRecord(t.Record),{isNewRow:!0,animationsEnabled:e.animationsEnabled}),e.success(t)):(o._logError("Server must return the created Record object."),e.error(t))};if(!e.url&&t.isFunction(o.options.actions.createAction)){var n=o.options.actions.createAction(t.param(e.record));o._isDeferredObject(n)?n.done(function(e){i(e)}).fail(function(){o._showError(o.options.messages.serverCommunicationError);e.error()}):i(n)}else o._submitFormUsingAjax(e.url||o.options.actions.createAction,t.param(e.record),function(e){i(e)},function(){o._showError(o.options.messages.serverCommunicationError);e.error()})}}else o._logWarn("options parameter in addRecord method must contain a record property.")},_showAddRecordForm:function _showAddRecordForm(){for(var o=this,a=t("<form id=\"jtable-create-form\" class=\"jtable-dialog-form jtable-create-form\"></form>"),i=0;i<o._fieldList.length;i++){var n=o._fieldList[i],s=o.options.fields[n];!0==s.key&&!0!=s.create||!1==s.create||("hidden"==s.type?a.append(o._createInputForHidden(n,s.defaultValue)):(s=t("<div />").addClass("jtable-input-field-container").appendTo(a),s.append(o._createInputLabelForRecordField(n)),s.append(o._createInputForRecordField({fieldName:n,formType:"create",form:a}))))}o._makeCascadeDropDowns(a,void 0,"create");a.submit(function(){o._onSaveClickedOnCreateForm();return!1});o._$addRecordDiv.append(a).dialog("open");o._trigger("formCreated",null,{form:a,formType:"create"})},_saveAddRecordForm:function _saveAddRecordForm(o,i){var n=this,s=function(e){"OK"!=e.Result?(n._showError(e.Message),n._setEnabledOfDialogButton(i,!0,n.options.messages.save)):e.Record?(n._onRecordAdded(e),n._addRow(n._createRowFromRecord(e.Record),{isNewRow:!0}),n._$addRecordDiv.dialog("close")):(n._logError("Server must return the created Record object."),n._setEnabledOfDialogButton(i,!0,n.options.messages.save))};o.data("submitting",!0);if(t.isFunction(n.options.actions.createAction)){var a=n.options.actions.createAction(o.serialize());n._isDeferredObject(a)?a.done(function(e){s(e)}).fail(function(){n._showError(n.options.messages.serverCommunicationError);n._setEnabledOfDialogButton(i,!0,n.options.messages.save)}):s(a)}else n._submitFormUsingAjax(n.options.actions.createAction,o.serialize(),function(e){s(e)},function(){n._showError(n.options.messages.serverCommunicationError);n._setEnabledOfDialogButton(i,!0,n.options.messages.save)})},_onRecordAdded:function _onRecordAdded(e){this._trigger("recordAdded",null,{record:e.Record,serverResponse:e})}})})(jQuery);(function(t){var e=t.hik.jtable.prototype._create,o=t.hik.jtable.prototype._addColumnsToHeaderRow,i=t.hik.jtable.prototype._addCellsToRowUsingRecord;t.extend(!0,t.hik.jtable.prototype,{options:{recordUpdated:function recordUpdated(){},rowUpdated:function rowUpdated(){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function _create(){e.apply(this,arguments);this.options.actions.updateAction&&this._createEditDialogDiv()},_createEditDialogDiv:function _createEditDialogDiv(){var e=this;e._$editDiv=t("<div></div>").appendTo(e._$mainContainer);e._$editDiv.dialog({autoOpen:!1,show:e.options.dialogShowEffect,hide:e.options.dialogHideEffect,width:"auto",minWidth:"300",modal:!0,title:e.options.messages.editRecord,buttons:[{text:e.options.messages.cancel,click:function click(){e._$editDiv.dialog("close")}},{id:"EditDialogSaveButton",text:e.options.messages.save,click:function click(){e._onSaveClickedOnEditForm()}}],close:function close(){var t=e._$editDiv.find("form:first"),o=e._$editDiv.parent().find("#EditDialogSaveButton");e._trigger("formClosed",null,{form:t,formType:"edit",row:e._$editingRow});e._setEnabledOfDialogButton(o,!0,e.options.messages.save);t.remove()}})},_onSaveClickedOnEditForm:function _onSaveClickedOnEditForm(){if(this._$editingRow.hasClass("jtable-row-removed"))this._$editDiv.dialog("close");else{var e=this._$editDiv.parent().find("#EditDialogSaveButton"),t=this._$editDiv.find("form");!1!=this._trigger("formSubmitting",null,{form:t,formType:"edit",row:this._$editingRow})&&(this._setEnabledOfDialogButton(e,!1,this.options.messages.saving),this._saveEditForm(t,e))}},updateRecord:function updateRecord(o){var i=this;o=t.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,success:function success(){},error:function error(){}},o);if(o.record){var n=i._getKeyValueOfRecord(o.record);if(void 0==n||null==n)i._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.");else{var s=i.getRowByKey(n);if(null==s)i._logWarn("Can not found any row by key \""+n+"\" on the table. Updating row must be visible on the table.");else if(o.clientOnly)t.extend(s.data("record"),o.record),i._updateRowTexts(s),i._onRecordUpdated(s,null),o.animationsEnabled&&i._showUpdateAnimationForRow(s),o.success();else{var d=function(a){"OK"!=a.Result?(i._showError(a.Message),o.error(a)):(t.extend(s.data("record"),o.record),i._updateRecordValuesFromServerResponse(s.data("record"),a),i._updateRowTexts(s),i._onRecordUpdated(s,a),o.animationsEnabled&&i._showUpdateAnimationForRow(s),o.success(a))};!o.url&&t.isFunction(i.options.actions.updateAction)?(n=i.options.actions.updateAction(t.param(o.record)),i._isDeferredObject(n)?n.done(function(e){d(e)}).fail(function(){i._showError(i.options.messages.serverCommunicationError);o.error()}):d(n)):i._submitFormUsingAjax(o.url||i.options.actions.updateAction,t.param(o.record),function(e){d(e)},function(){i._showError(i.options.messages.serverCommunicationError);o.error()})}}}else i._logWarn("options parameter in updateRecord method must contain a record property.")},_addColumnsToHeaderRow:function _addColumnsToHeaderRow(e){o.apply(this,arguments);void 0!=this.options.actions.updateAction&&e.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function _addCellsToRowUsingRecord(o){var a=this;i.apply(this,arguments);if(void 0!=a.options.actions.updateAction){var n=t("<span></span>").html(a.options.messages.editRecord),n=t("<button title=\""+a.options.messages.editRecord+"\"></button>").addClass("jtable-command-button jtable-edit-command-button").append(n).click(function(e){e.preventDefault();e.stopPropagation();a._showEditForm(o)});t("<td></td>").addClass("jtable-command-column").append(n).appendTo(o)}},_showEditForm:function _showEditForm(o){for(var a=this,i=o.data("record"),e=t("<form id=\"jtable-edit-form\" class=\"jtable-dialog-form jtable-edit-form\"></form>"),s=0;s<a._fieldList.length;s++){var d=a._fieldList[s],r=a.options.fields[d],l=i[d];if(!0==r.key)if(!0!=r.edit){e.append(a._createInputForHidden(d,l));continue}else e.append(a._createInputForHidden("jtRecordKey",l));!1!=r.edit&&("hidden"==r.type?e.append(a._createInputForHidden(d,l)):(r=t("<div class=\"jtable-input-field-container\"></div>").appendTo(e),r.append(a._createInputLabelForRecordField(d)),l=a._getValueForRecordField(i,d),r.append(a._createInputForRecordField({fieldName:d,value:l,record:i,formType:"edit",form:e}))))}a._makeCascadeDropDowns(e,i,"edit");e.submit(function(){a._onSaveClickedOnEditForm();return!1});a._$editingRow=o;a._$editDiv.append(e).dialog("open");a._trigger("formCreated",null,{form:e,formType:"edit",record:i,row:o})},_saveEditForm:function _saveEditForm(o,a){var i=this,e=function(e){if("OK"!=e.Result)i._showError(e.Message),i._setEnabledOfDialogButton(a,!0,i.options.messages.save);else{var t=i._$editingRow.data("record");i._updateRecordValuesFromForm(t,o);i._updateRecordValuesFromServerResponse(t,e);i._updateRowTexts(i._$editingRow);i._$editingRow.attr("data-record-key",i._getKeyValueOfRecord(t));i._onRecordUpdated(i._$editingRow,e);i.options.animationsEnabled&&i._showUpdateAnimationForRow(i._$editingRow);i._$editDiv.dialog("close")}};if(t.isFunction(i.options.actions.updateAction)){var n=i.options.actions.updateAction(o.serialize());i._isDeferredObject(n)?n.done(function(t){e(t)}).fail(function(){i._showError(i.options.messages.serverCommunicationError);i._setEnabledOfDialogButton(a,!0,i.options.messages.save)}):e(n)}else i._submitFormUsingAjax(i.options.actions.updateAction,o.serialize(),function(t){e(t)},function(){i._showError(i.options.messages.serverCommunicationError);i._setEnabledOfDialogButton(a,!0,i.options.messages.save)})},_updateRecordValuesFromServerResponse:function _updateRecordValuesFromServerResponse(e,o){o&&o.Record&&t.extend(!0,e,o.Record)},_getValueForRecordField:function _getValueForRecordField(e,t){var o=this.options.fields[t],a=e[t];return"date"==o.type?this._getDisplayTextForDateRecordField(o,a):a},_updateRowTexts:function _updateRowTexts(e){for(var t=e.data("record"),o=e.find("td"),a=0,i;a<this._columnList.length;a++){i=this._getDisplayTextForRecordField(t,this._columnList[a]);""!=i&&0==i&&(i="0");o.eq(this._firstDataColumnOffset+a).html(i||"")}this._onRowUpdated(e)},_showUpdateAnimationForRow:function _showUpdateAnimationForRow(e){var t="jtable-row-updated";this.options.jqueryuiTheme&&(t+=" ui-state-highlight");e.stop(!0,!0).addClass(t,"slow","",function(){e.removeClass(t,5E3)})},_onRowUpdated:function _onRowUpdated(e){this._trigger("rowUpdated",null,{row:e,record:e.data("record")})},_onRecordUpdated:function _onRecordUpdated(e,t){this._trigger("recordUpdated",null,{record:e.data("record"),row:e,serverResponse:t})}})})(jQuery);(function(t){var e=t.hik.jtable.prototype._create,o=t.hik.jtable.prototype._addColumnsToHeaderRow,i=t.hik.jtable.prototype._addCellsToRowUsingRecord;t.extend(!0,t.hik.jtable.prototype,{options:{deleteConfirmation:!0,recordDeleted:function recordDeleted(){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function _create(){e.apply(this,arguments);this._createDeleteDialogDiv()},_createDeleteDialogDiv:function _createDeleteDialogDiv(){var e=this;e.options.actions.deleteAction&&(e._$deleteRecordDiv=t("<div><p><span class=\"ui-icon ui-icon-alert\" style=\"float:left; margin:0 7px 20px 0;\"></span><span class=\"jtable-delete-confirm-message\"></span></p></div>").appendTo(e._$mainContainer),e._$deleteRecordDiv.dialog({autoOpen:!1,show:e.options.dialogShowEffect,hide:e.options.dialogHideEffect,modal:!0,title:e.options.messages.areYouSure,buttons:[{text:e.options.messages.cancel,click:function click(){e._$deleteRecordDiv.dialog("close")}},{id:"DeleteDialogButton",text:e.options.messages.deleteText,click:function click(){if(e._$deletingRow.hasClass("jtable-row-removed"))e._$deleteRecordDiv.dialog("close");else{var t=e._$deleteRecordDiv.parent().find("#DeleteDialogButton");e._setEnabledOfDialogButton(t,!1,e.options.messages.deleting);e._deleteRecordFromServer(e._$deletingRow,function(){e._removeRowsFromTableWithAnimation(e._$deletingRow);e._$deleteRecordDiv.dialog("close")},function(o){e._showError(o);e._setEnabledOfDialogButton(t,!0,e.options.messages.deleteText)})}}}],close:function close(){var t=e._$deleteRecordDiv.parent().find("#DeleteDialogButton");e._setEnabledOfDialogButton(t,!0,e.options.messages.deleteText)}}))},deleteRows:function deleteRows(o){var i=this;if(0>=o.length)i._logWarn("No rows specified to jTable deleteRows method.");else if(i._isBusy())i._logWarn("Can not delete rows since jTable is busy!");else if(1==o.length)i._deleteRecordFromServer(o,function(){i._removeRowsFromTableWithAnimation(o)},function(e){i._showError(e)});else{i._showBusy(i._formatString(i.options.messages.deleteProggress,0,o.length));var a=0,n=function(){var e=o.filter(".jtable-row-ready-to-remove");e.length<o.length&&i._showError(i._formatString(i.options.messages.canNotDeletedRecords,o.length-e.length,o.length));0<e.length&&i._removeRowsFromTableWithAnimation(e);i._hideBusy()},s=0;o.each(function(){var e=t(this);i._deleteRecordFromServer(e,function(){++s;++a;e.addClass("jtable-row-ready-to-remove");i._showBusy(i._formatString(i.options.messages.deleteProggress,s,o.length));a>=o.length&&n()},function(){++a;a>=o.length&&n()})})}},deleteRecord:function deleteRecord(o){var i=this;o=t.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,url:i.options.actions.deleteAction,success:function success(){},error:function error(){}},o);if(void 0==o.key)i._logWarn("options parameter in deleteRecord method must contain a key property.");else{var n=i.getRowByKey(o.key);null==n?i._logWarn("Can not found any row by key: "+o.key):o.clientOnly?(i._removeRowsFromTableWithAnimation(n,o.animationsEnabled),o.success()):i._deleteRecordFromServer(n,function(e){i._removeRowsFromTableWithAnimation(n,o.animationsEnabled);o.success(e)},function(e){i._showError(e);o.error(e)},o.url)}},_addColumnsToHeaderRow:function _addColumnsToHeaderRow(e){o.apply(this,arguments);void 0!=this.options.actions.deleteAction&&e.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function _addCellsToRowUsingRecord(o){i.apply(this,arguments);var a=this;if(void 0!=a.options.actions.deleteAction){var n=t("<span></span>").html(a.options.messages.deleteText),n=t("<button title=\""+a.options.messages.deleteText+"\"></button>").addClass("jtable-command-button jtable-delete-command-button").append(n).click(function(e){e.preventDefault();e.stopPropagation();a._deleteButtonClickedForRow(o)});t("<td></td>").addClass("jtable-command-column").append(n).appendTo(o)}},_deleteButtonClickedForRow:function _deleteButtonClickedForRow(o){var i=this,a,n=i.options.messages.deleteConfirmation;if(t.isFunction(i.options.deleteConfirmation)){a={row:o,record:o.data("record"),deleteConfirm:!0,deleteConfirmMessage:n,cancel:!1,cancelMessage:null};i.options.deleteConfirmation(a);if(a.cancel){a.cancelMessage&&i._showError(a.cancelMessage);return}n=a.deleteConfirmMessage;a=a.deleteConfirm}else a=i.options.deleteConfirmation;!1!=a?(i._$deleteRecordDiv.find(".jtable-delete-confirm-message").html(n),i._showDeleteDialog(o)):i._deleteRecordFromServer(o,function(){i._removeRowsFromTableWithAnimation(o)},function(e){i._showError(e)})},_showDeleteDialog:function _showDeleteDialog(e){this._$deletingRow=e;this._$deleteRecordDiv.dialog("open")},_deleteRecordFromServer:function _deleteRecordFromServer(o,a,i,e){var n=this,s=function(e){"OK"!=e.Result?(o.data("deleting",!1),i&&i(e.Message)):(n._trigger("recordDeleted",null,{record:o.data("record"),row:o,serverResponse:e}),a&&a(e))};if(!0!=o.data("deleting")){o.data("deleting",!0);var d={};d[n._keyField]=n._getKeyValueOfRecord(o.data("record"));!e&&t.isFunction(n.options.actions.deleteAction)?(e=n.options.actions.deleteAction(d),n._isDeferredObject(e)?e.done(function(e){s(e)}).fail(function(){o.data("deleting",!1);i&&i(n.options.messages.serverCommunicationError)}):s(e)):this._ajax({url:e||n.options.actions.deleteAction,data:d,success:function success(e){s(e)},error:function error(){o.data("deleting",!1);i&&i(n.options.messages.serverCommunicationError)}})}},_removeRowsFromTableWithAnimation:function _removeRowsFromTableWithAnimation(e,t){var o=this;void 0==t&&(t=o.options.animationsEnabled);if(t){var a="jtable-row-deleting";this.options.jqueryuiTheme&&(a+=" ui-state-disabled");e.stop(!0,!0).addClass(a,"slow","").promise().done(function(){o._removeRowsFromTable(e,"deleted")})}else o._removeRowsFromTable(e,"deleted")}})})(jQuery);(function(t){var o=t.hik.jtable.prototype._create,i=t.hik.jtable.prototype._addColumnsToHeaderRow,n=t.hik.jtable.prototype._addCellsToRowUsingRecord,a=t.hik.jtable.prototype._onLoadingRecords,s=t.hik.jtable.prototype._onRecordsLoaded,d=t.hik.jtable.prototype._onRowsRemoved;t.extend(!0,t.hik.jtable.prototype,{options:{selecting:!1,multiselect:!1,selectingCheckboxes:!1,selectOnRowClick:!0,selectionChanged:function selectionChanged(){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:!1,_create:function _create(){this.options.selecting&&this.options.selectingCheckboxes&&(++this._firstDataColumnOffset,this._bindKeyboardEvents());o.apply(this,arguments)},_bindKeyboardEvents:function _bindKeyboardEvents(){var e=this;t(document).keydown(function(t){switch(t.which){case 16:e._shiftKeyDown=!0;}}).keyup(function(t){switch(t.which){case 16:e._shiftKeyDown=!1;}})},selectedRows:function selectedRows(){return this._getSelectedRows()},selectRows:function selectRows(e){this._selectRows(e);this._onSelectionChanged()},_addColumnsToHeaderRow:function _addColumnsToHeaderRow(e){this.options.selecting&&this.options.selectingCheckboxes&&(this.options.multiselect?e.append(this._createSelectAllHeader()):e.append(this._createEmptyCommandHeader()));i.apply(this,arguments)},_addCellsToRowUsingRecord:function _addCellsToRowUsingRecord(e){this.options.selecting&&this._makeRowSelectable(e);n.apply(this,arguments)},_onLoadingRecords:function _onLoadingRecords(){this.options.selecting&&this._storeSelectionList();a.apply(this,arguments)},_onRecordsLoaded:function _onRecordsLoaded(){this.options.selecting&&this._restoreSelectionList();s.apply(this,arguments)},_onRowsRemoved:function _onRowsRemoved(e,t){this.options.selecting&&"reloading"!=t&&0<e.filter(".jtable-row-selected").length&&this._onSelectionChanged();d.apply(this,arguments)},_createSelectAllHeader:function _createSelectAllHeader(){var e=this,o=t("<th class=\"\"></th>").addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass(o,"ui-state-default");var a=t("<div />").addClass("jtable-column-header-container").appendTo(o);e._$selectAllCheckbox=t("<input type=\"checkbox\" />").appendTo(a).click(function(){if(0>=e._$tableRows.length)e._$selectAllCheckbox.attr("checked",!1);else{var t=e._$tableBody.find(">tr.jtable-data-row");e._$selectAllCheckbox.is(":checked")?e._selectRows(t):e._deselectRows(t);e._onSelectionChanged()}});return o},_storeSelectionList:function _storeSelectionList(){var e=this;e.options.selecting&&(e._selectedRecordIdsBeforeLoad=[],e._getSelectedRows().each(function(){e._selectedRecordIdsBeforeLoad.push(e._getKeyValueOfRecord(t(this).data("record")))}))},_restoreSelectionList:function _restoreSelectionList(){if(this.options.selecting){for(var e=0,o=0,i;o<this._$tableRows.length;++o){i=this._getKeyValueOfRecord(this._$tableRows[o].data("record"));-1<t.inArray(i,this._selectedRecordIdsBeforeLoad)&&(this._selectRows(this._$tableRows[o]),++e)}0<this._selectedRecordIdsBeforeLoad.length&&this._selectedRecordIdsBeforeLoad.length!=e&&this._onSelectionChanged();this._selectedRecordIdsBeforeLoad=[];this._refreshSelectAllCheckboxState()}},_getSelectedRows:function _getSelectedRows(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function _makeRowSelectable(o){var a=this;a.options.selectOnRowClick&&o.click(function(){a._invertRowSelection(o)});if(a.options.selectingCheckboxes){var i=t("<td></td>").addClass("jtable-selecting-column"),n=t("<input type=\"checkbox\" />").appendTo(i);a.options.selectOnRowClick||n.click(function(){a._invertRowSelection(o)});o.append(i)}},_invertRowSelection:function _invertRowSelection(e){if(e.hasClass("jtable-row-selected"))this._deselectRows(e);else if(this._shiftKeyDown){var t=this._findRowIndex(e),o=this._findFirstSelectedRowIndexBeforeIndex(t)+1;0<o&&o<t?this._selectRows(this._$tableBody.find("tr").slice(o,t+1)):(o=this._findFirstSelectedRowIndexAfterIndex(t)-1,o>t?this._selectRows(this._$tableBody.find("tr").slice(t,o+1)):this._selectRows(e))}else this._selectRows(e);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function _findFirstSelectedRowIndexBeforeIndex(e){for(e-=1;0<=e;--e){if(this._$tableRows[e].hasClass("jtable-row-selected"))return e}return-1},_findFirstSelectedRowIndexAfterIndex:function _findFirstSelectedRowIndexAfterIndex(e){for(e+=1;e<this._$tableRows.length;++e){if(this._$tableRows[e].hasClass("jtable-row-selected"))return e}return-1},_selectRows:function _selectRows(e){this.options.multiselect||this._deselectRows(this._getSelectedRows());e.addClass("jtable-row-selected");this._jqueryuiThemeAddClass(e,"ui-state-highlight");this.options.selectingCheckboxes&&e.find(">td.jtable-selecting-column >input").prop("checked",!0);this._refreshSelectAllCheckboxState()},_deselectRows:function _deselectRows(e){e.removeClass("jtable-row-selected ui-state-highlight");this.options.selectingCheckboxes&&e.find(">td.jtable-selecting-column >input").prop("checked",!1);this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function _refreshSelectAllCheckboxState(){if(this.options.selectingCheckboxes&&this.options.multiselect){var e=this._$tableRows.length,t=this._getSelectedRows().length;0==t?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!1)):t==e?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!0)):(this._$selectAllCheckbox.attr("checked",!1),this._$selectAllCheckbox.prop("indeterminate",!0))}},_onSelectionChanged:function _onSelectionChanged(){this._trigger("selectionChanged",null,{})}})})(jQuery);(function(t){var o=t.hik.jtable.prototype.load,i=t.hik.jtable.prototype._create,n=t.hik.jtable.prototype._setOption,s=t.hik.jtable.prototype._createRecordLoadUrl,d=t.hik.jtable.prototype._createJtParamsForLoading,r=t.hik.jtable.prototype._addRowToTable,e=t.hik.jtable.prototype._addRow,a=t.hik.jtable.prototype._removeRowsFromTable,c=t.hik.jtable.prototype._onRecordsLoaded;t.extend(!0,t.hik.jtable.prototype,{options:{paging:!1,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:!0,gotoPageArea:"combobox",messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count",gotoPageLabel:"Go to page"}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function _create(){i.apply(this,arguments);this.options.paging&&(this._loadPagingSettings(),this._createBottomPanel(),this._createPageListArea(),this._createGotoPageInput(),this._createPageSizeSelection())},_loadPagingSettings:function _loadPagingSettings(){if(this.options.saveUserPreferences){var e=this._getCookie("page-size");e&&(this.options.pageSize=this._normalizeNumber(e,1,1E6,this.options.pageSize))}},_createBottomPanel:function _createBottomPanel(){this._$bottomPanel=t("<div />").addClass("jtable-bottom-panel").insertAfter(this._$table);this._jqueryuiThemeAddClass(this._$bottomPanel,"ui-state-default");t("<div />").addClass("jtable-left-area").appendTo(this._$bottomPanel);t("<div />").addClass("jtable-right-area").appendTo(this._$bottomPanel)},_createPageListArea:function _createPageListArea(){this._$pagingListArea=t("<span></span>").addClass("jtable-page-list").appendTo(this._$bottomPanel.find(".jtable-left-area"));this._$pageInfoSpan=t("<span></span>").addClass("jtable-page-info").appendTo(this._$bottomPanel.find(".jtable-right-area"))},_createPageSizeSelection:function _createPageSizeSelection(){var e=this;if(e.options.pageSizeChangeArea){0>e._findIndexInArray(e.options.pageSize,e.options.pageSizes)&&(e.options.pageSizes.push(parseInt(e.options.pageSize)),e.options.pageSizes.sort(function(e,t){return e-t}));e._$pageSizeChangeArea=t("<span></span>").addClass("jtable-page-size-change").appendTo(e._$bottomPanel.find(".jtable-left-area"));e._$pageSizeChangeArea.append("<span>"+e.options.messages.pageSizeChangeLabel+": </span>");for(var o=t("<select></select>").appendTo(e._$pageSizeChangeArea),a=0;a<e.options.pageSizes.length;a++){o.append("<option value=\""+e.options.pageSizes[a]+"\">"+e.options.pageSizes[a]+"</option>")}o.val(e.options.pageSize);o.change(function(){e._changePageSize(parseInt(t(this).val()))})}},_createGotoPageInput:function _createGotoPageInput(){var e=this;e.options.gotoPageArea&&"none"!=e.options.gotoPageArea&&(this._$gotoPageArea=t("<span></span>").addClass("jtable-goto-page").appendTo(e._$bottomPanel.find(".jtable-left-area")),this._$gotoPageArea.append("<span>"+e.options.messages.gotoPageLabel+": </span>"),"combobox"==e.options.gotoPageArea?(e._$gotoPageInput=t("<select></select>").appendTo(this._$gotoPageArea).data("pageCount",1).change(function(){e._changePage(parseInt(t(this).val()))}),e._$gotoPageInput.append("<option value=\"1\">1</option>")):e._$gotoPageInput=t("<input type=\"text\" maxlength=\"10\" value=\""+e._currentPageNo+"\" />").appendTo(this._$gotoPageArea).keypress(function(t){13==t.which?(t.preventDefault(),e._changePage(parseInt(e._$gotoPageInput.val()))):43==t.which?(t.preventDefault(),e._changePage(parseInt(e._$gotoPageInput.val())+1)):45==t.which?(t.preventDefault(),e._changePage(parseInt(e._$gotoPageInput.val())-1)):47<t.keyCode&&58>t.keyCode&&!1==t.shiftKey&&!1==t.altKey||8==t.keyCode||9==t.keyCode||t.preventDefault()}))},_refreshGotoPageInput:function _refreshGotoPageInput(){if(this.options.gotoPageArea&&"none"!=this.options.gotoPageArea){0>=this._totalRecordCount?this._$gotoPageArea.hide():this._$gotoPageArea.show();if("combobox"==this.options.gotoPageArea){var e=this._$gotoPageInput.data("pageCount"),t=this._calculatePageCount();if(e!=t){this._$gotoPageInput.empty();e=1;1E4<t?e=100:5E3<t?e=10:2E3<t?e=5:1E3<t&&(e=2);for(var o=e;o<=t;o+=e){this._$gotoPageInput.append("<option value=\""+o+"\">"+o+"</option>")}this._$gotoPageInput.data("pageCount",t)}}this._$gotoPageInput.val(this._currentPageNo)}},load:function load(){this._currentPageNo=1;o.apply(this,arguments)},_setOption:function _setOption(e,t){n.apply(this,arguments);"pageSize"==e&&this._changePageSize(parseInt(t))},_changePageSize:function _changePageSize(e){if(e!=this.options.pageSize){this.options.pageSize=e;var t=this._calculatePageCount();this._currentPageNo>t&&(this._currentPageNo=t);0>=this._currentPageNo&&(this._currentPageNo=1);t=this._$bottomPanel.find(".jtable-page-size-change select");0<t.length&&parseInt(t.val())!=e&&0<t.find("option[value="+e+"]").length&&t.val(e);this._savePagingSettings();this._reloadTable()}},_savePagingSettings:function _savePagingSettings(){this.options.saveUserPreferences&&this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function _createRecordLoadUrl(){var e=s.apply(this,arguments);return e=this._addPagingInfoToUrl(e,this._currentPageNo)},_createJtParamsForLoading:function _createJtParamsForLoading(){var e=d.apply(this,arguments);this.options.paging&&(e.jtStartIndex=(this._currentPageNo-1)*this.options.pageSize,e.jtPageSize=this.options.pageSize);return e},_addRowToTable:function _addRowToTable(e,t,o){o&&this.options.paging?this._reloadTable():r.apply(this,arguments)},_addRow:function _addRow(t,o){o&&o.isNewRow&&this.options.paging?this._reloadTable():e.apply(this,arguments)},_removeRowsFromTable:function _removeRowsFromTable(){a.apply(this,arguments);this.options.paging&&(0>=this._$tableRows.length&&1<this._currentPageNo&&--this._currentPageNo,this._reloadTable())},_onRecordsLoaded:function _onRecordsLoaded(e){this.options.paging&&(this._totalRecordCount=e.TotalRecordCount,this._createPagingList(),this._createPagingInfo(),this._refreshGotoPageInput());c.apply(this,arguments)},_addPagingInfoToUrl:function _addPagingInfoToUrl(e,t){if(!this.options.paging)return e;var o=(t-1)*this.options.pageSize,a=this.options.pageSize;return e+(0>e.indexOf("?")?"?":"&")+"jtStartIndex="+o+"&jtPageSize="+a},_createPagingList:function _createPagingList(){if(!(0>=this.options.pageSize||(this._$pagingListArea.empty(),0>=this._totalRecordCount))){var e=this._calculatePageCount();this._createFirstAndPreviousPageButtons();"normal"==this.options.pageList&&this._createPageNumberButtons(this._calculatePageNumbers(e));this._createLastAndNextPageButtons(e);this._bindClickEventsToPageNumberButtons()}},_createFirstAndPreviousPageButtons:function _createFirstAndPreviousPageButtons(){var e=t("<span></span>").addClass("jtable-page-number-first").html("&lt&lt").data("pageNumber",1).appendTo(this._$pagingListArea),o=t("<span></span>").addClass("jtable-page-number-previous").html("&lt").data("pageNumber",this._currentPageNo-1).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(e,"ui-button ui-state-default","ui-state-hover");this._jqueryuiThemeAddClass(o,"ui-button ui-state-default","ui-state-hover");1>=this._currentPageNo&&(e.addClass("jtable-page-number-disabled"),o.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(e,"ui-state-disabled"),this._jqueryuiThemeAddClass(o,"ui-state-disabled"))},_createLastAndNextPageButtons:function _createLastAndNextPageButtons(e){var o=t("<span></span>").addClass("jtable-page-number-next").html("&gt").data("pageNumber",this._currentPageNo+1).appendTo(this._$pagingListArea),a=t("<span></span>").addClass("jtable-page-number-last").html("&gt&gt").data("pageNumber",e).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(o,"ui-button ui-state-default","ui-state-hover");this._jqueryuiThemeAddClass(a,"ui-button ui-state-default","ui-state-hover");this._currentPageNo>=e&&(o.addClass("jtable-page-number-disabled"),a.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(o,"ui-state-disabled"),this._jqueryuiThemeAddClass(a,"ui-state-disabled"))},_createPageNumberButtons:function _createPageNumberButtons(e){for(var o=0,a=0;a<e.length;a++){1<e[a]-o&&t("<span></span>").addClass("jtable-page-number-space").html("...").appendTo(this._$pagingListArea),this._createPageNumberButton(e[a]),o=e[a]}},_createPageNumberButton:function _createPageNumberButton(e){var o=t("<span></span>").addClass("jtable-page-number").html(e).data("pageNumber",e).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(o,"ui-button ui-state-default","ui-state-hover");this._currentPageNo==e&&(o.addClass("jtable-page-number-active jtable-page-number-disabled"),this._jqueryuiThemeAddClass(o,"ui-state-active"))},_calculatePageCount:function _calculatePageCount(){var e=Math.floor(this._totalRecordCount/this.options.pageSize);0!=this._totalRecordCount%this.options.pageSize&&++e;return e},_calculatePageNumbers:function _calculatePageNumbers(e){if(4>=e){for(var t=[],o=1;o<=e;++o){t.push(o)}return t}t=[1,2,e-1,e];o=this._normalizeNumber(this._currentPageNo-1,1,e,1);e=this._normalizeNumber(this._currentPageNo+1,1,e,1);this._insertToArrayIfDoesNotExists(t,o);this._insertToArrayIfDoesNotExists(t,this._currentPageNo);this._insertToArrayIfDoesNotExists(t,e);t.sort(function(e,t){return e-t});return t},_createPagingInfo:function _createPagingInfo(){if(0>=this._totalRecordCount)this._$pageInfoSpan.empty();else{var e=(this._currentPageNo-1)*this.options.pageSize+1,t=this._currentPageNo*this.options.pageSize,t=this._normalizeNumber(t,e,this._totalRecordCount,0);t>=e&&(e=this._formatString(this.options.messages.pagingInfo,e,t,this._totalRecordCount),this._$pageInfoSpan.html(e))}},_bindClickEventsToPageNumberButtons:function _bindClickEventsToPageNumberButtons(){var e=this;e._$pagingListArea.find(".jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last").not(".jtable-page-number-disabled").click(function(o){o.preventDefault();e._changePage(t(this).data("pageNumber"))})},_changePage:function _changePage(e){e=this._normalizeNumber(e,1,this._calculatePageCount(),1);e==this._currentPageNo?this._refreshGotoPageInput():(this._currentPageNo=e,this._reloadTable())}})})(jQuery);(function(e){var t=e.hik.jtable.prototype._initializeFields,o=e.hik.jtable.prototype._normalizeFieldOptions,i=e.hik.jtable.prototype._createHeaderCellForField,n=e.hik.jtable.prototype._createRecordLoadUrl,s=e.hik.jtable.prototype._createJtParamsForLoading;e.extend(!0,e.hik.jtable.prototype,{options:{sorting:!1,multiSorting:!1,defaultSorting:""},_lastSorting:null,_initializeFields:function _initializeFields(){t.apply(this,arguments);this._lastSorting=[];this.options.sorting&&this._buildDefaultSortingArray()},_normalizeFieldOptions:function _normalizeFieldOptions(e,t){o.apply(this,arguments);t.sorting=!1!=t.sorting},_createHeaderCellForField:function _createHeaderCellForField(e,t){var o=i.apply(this,arguments);this.options.sorting&&t.sorting&&this._makeColumnSortable(o,e);return o},_createRecordLoadUrl:function _createRecordLoadUrl(){var e=n.apply(this,arguments);return e=this._addSortingInfoToUrl(e)},_buildDefaultSortingArray:function _buildDefaultSortingArray(){var t=this;e.each(t.options.defaultSorting.split(","),function(o,a){e.each(t.options.fields,function(e,o){if(o.sorting){var i=a.indexOf(e);-1<i&&(-1<a.toUpperCase().indexOf(" DESC",i)?t._lastSorting.push({fieldName:e,sortOrder:"DESC"}):t._lastSorting.push({fieldName:e,sortOrder:"ASC"}))}})})},_makeColumnSortable:function _makeColumnSortable(t,o){var a=this;t.addClass("jtable-column-header-sortable").click(function(e){e.preventDefault();a.options.multiSorting&&e.ctrlKey||(a._lastSorting=[]);a._sortTableByColumn(t)});e.each(this._lastSorting,function(e,a){a.fieldName==o&&("DESC"==a.sortOrder?t.addClass("jtable-column-header-sorted-desc"):t.addClass("jtable-column-header-sorted-asc"))})},_sortTableByColumn:function _sortTableByColumn(e){0==this._lastSorting.length&&e.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc");for(var t=0;t<this._lastSorting.length;t++){this._lastSorting[t].fieldName==e.data("fieldName")&&this._lastSorting.splice(t--,1)}e.hasClass("jtable-column-header-sorted-asc")?(e.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc"),this._lastSorting.push({fieldName:e.data("fieldName"),sortOrder:"DESC"})):(e.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc"),this._lastSorting.push({fieldName:e.data("fieldName"),sortOrder:"ASC"}));this._reloadTable()},_addSortingInfoToUrl:function _addSortingInfoToUrl(t){if(!this.options.sorting||0==this._lastSorting.length)return t;var o=[];e.each(this._lastSorting,function(e,t){o.push(t.fieldName+" "+t.sortOrder)});return t+(0>t.indexOf("?")?"?":"&")+"jtSorting="+o.join(",")},_createJtParamsForLoading:function _createJtParamsForLoading(){var t=s.apply(this,arguments);if(this.options.sorting&&this._lastSorting.length){var o=[];e.each(this._lastSorting,function(e,t){o.push(t.fieldName+" "+t.sortOrder)});t.jtSorting=o.join(",")}return t}})})(jQuery);(function(t){var e=t.hik.jtable.prototype._create,o=t.hik.jtable.prototype._normalizeFieldOptions,i=t.hik.jtable.prototype._createHeaderCellForField,n=t.hik.jtable.prototype._createCellForRecordField;t.extend(!0,t.hik.jtable.prototype,{options:{tableId:void 0,columnResizable:!0,columnSelectable:!0},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function _create(){e.apply(this,arguments);this._createColumnResizeBar();this._createColumnSelection();this.options.saveUserPreferences&&this._loadColumnSettings();this._normalizeColumnWidths()},_normalizeFieldOptions:function _normalizeFieldOptions(e,t){o.apply(this,arguments);this.options.columnResizable&&(t.columnResizable=!1!=t.columnResizable);t.visibility||(t.visibility="visible")},_createHeaderCellForField:function _createHeaderCellForField(e,t){var o=i.apply(this,arguments);this.options.columnResizable&&t.columnResizable&&e!=this._columnList[this._columnList.length-1]&&this._makeColumnResizable(o);"hidden"==t.visibility&&o.hide();return o},_createCellForRecordField:function _createCellForRecordField(e,t){var o=n.apply(this,arguments);"hidden"==this.options.fields[t].visibility&&o.hide();return o},changeColumnVisibility:function changeColumnVisibility(e,t){this._changeColumnVisibilityInternal(e,t);this._normalizeColumnWidths();this.options.saveUserPreferences&&this._saveColumnSettings()},_changeColumnVisibilityInternal:function _changeColumnVisibilityInternal(e,t){var o=this._columnList.indexOf(e);if(0>o)this._logWarn("Column \""+e+"\" does not exist in fields!");else if(0>["visible","hidden","fixed"].indexOf(t))this._logWarn("Visibility value is not valid: \""+t+"\"! Options are: visible, hidden, fixed.");else{var a=this.options.fields[e];a.visibility!=t&&(o=this._firstDataColumnOffset+o+1,"hidden"!=a.visibility&&"hidden"==t?this._$table.find(">thead >tr >th:nth-child("+o+"),>tbody >tr >td:nth-child("+o+")").hide():"hidden"==a.visibility&&"hidden"!=t&&this._$table.find(">thead >tr >th:nth-child("+o+"),>tbody >tr >td:nth-child("+o+")").show().css("display","table-cell"),a.visibility=t)}},_createColumnSelection:function _createColumnSelection(){var e=this;this._$columnSelectionDiv=t("<div />").addClass("jtable-column-selection-container").appendTo(e._$mainContainer);this._$table.children("thead").bind("contextmenu",function(o){if(e.options.columnSelectable){o.preventDefault();t("<div />").addClass("jtable-contextmenu-overlay").click(function(){t(this).remove();e._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return!1}).appendTo(document.body);e._fillColumnSelection();var a=e._$mainContainer.offset(),i=o.pageY-a.top;o=o.pageX-a.left;a=e._$mainContainer.width();100<a&&o>a-100&&(o=a-100);e._$columnSelectionDiv.css({left:o,top:i,"min-width":"100px"}).show()}})},_fillColumnSelection:function _fillColumnSelection(){for(var e=this,o=t("<ul></ul>").addClass("jtable-column-select-list"),a=0;a<this._columnList.length;a++){var i=this._columnList[a],n=this.options.fields[i],s=t("<li></li>").appendTo(o),s=t("<label for=\""+i+"\"></label>").append(t("<span>"+(n.title||i)+"</span>")).appendTo(s),i=t("<input type=\"checkbox\" name=\""+i+"\">").prependTo(s).click(function(){var o=t(this),a=o.attr("name");"fixed"!=e.options.fields[a].visibility&&e.changeColumnVisibility(a,o.is(":checked")?"visible":"hidden")});"hidden"!=n.visibility&&i.attr("checked","checked");"fixed"==n.visibility&&i.attr("disabled","disabled")}this._$columnSelectionDiv.html(o)},_createColumnResizeBar:function _createColumnResizeBar(){this._$columnResizeBar=t("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function _makeColumnResizable(e){var o=this;t("<div />").addClass("jtable-column-resize-handler").appendTo(e.find(".jtable-column-header-container")).mousedown(function(a){a.preventDefault();a.stopPropagation();var i=o._$mainContainer.offset(),s=e.nextAll("th.jtable-column-header:visible:first");if(s.length){o._currentResizeArgs={currentColumnStartWidth:e.outerWidth(),minWidth:10,maxWidth:e.outerWidth()+s.outerWidth()-10,mouseStartX:a.pageX,minResizeX:function minResizeX(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function maxResizeX(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var r=function(e){o._currentResizeArgs&&(e=o._normalizeNumber(e.pageX,o._currentResizeArgs.minResizeX(),o._currentResizeArgs.maxResizeX()),o._$columnResizeBar.css("left",e-i.left+"px"))},l=function(a){if(o._currentResizeArgs){t(document).unbind("mousemove",r);t(document).unbind("mouseup",l);o._$columnResizeBar.hide();a=o._normalizeNumber(o._currentResizeArgs.currentColumnStartWidth+(a.pageX-o._currentResizeArgs.mouseStartX),o._currentResizeArgs.minWidth,o._currentResizeArgs.maxWidth);var i=s.outerWidth()+(o._currentResizeArgs.currentColumnStartWidth-a),n=e.data("width-in-percent")/o._currentResizeArgs.currentColumnStartWidth;e.data("width-in-percent",a*n);s.data("width-in-percent",i*n);e.css("width",e.data("width-in-percent")+"%");s.css("width",s.data("width-in-percent")+"%");o._normalizeColumnWidths();o._currentResizeArgs=null;o.options.saveUserPreferences&&o._saveColumnSettings()}};o._$columnResizeBar.show().css({top:e.offset().top-i.top+"px",left:a.pageX-i.left+"px",height:o._$table.outerHeight()+"px"});t(document).bind("mousemove",r);t(document).bind("mouseup",l)}})},_normalizeColumnWidths:function _normalizeColumnWidths(){var e=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%"),o=this._$table.find(">thead th.jtable-column-header"),i=0;o.each(function(){var e=t(this);e.is(":visible")&&(i+=e.outerWidth())});var n={},s=100-e.length;o.each(function(){var e=t(this);if(e.is(":visible")){var o=e.data("fieldName"),e=e.outerWidth()*s/i;n[o]=e}});o.each(function(){var e=t(this);if(e.is(":visible")){var o=e.data("fieldName");e.data("width-in-percent",n[o]).css("width",n[o]+"%")}})},_saveColumnSettings:function _saveColumnSettings(){var e=this,o="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var a=t(this),i=a.data("fieldName"),a=a.data("width-in-percent");o=o+(i+"="+e.options.fields[i].visibility+";"+a)+"|"});this._setCookie("column-settings",o.substr(0,o.length-1))},_loadColumnSettings:function _loadColumnSettings(){var o=this,e=this._getCookie("column-settings");if(e){var i={};t.each(e.split("|"),function(t,o){var a=o.split("="),n=a[0],a=a[1].split(";");i[n]={columnVisibility:a[0],columnWidth:a[1]}});this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var a=t(this),n=a.data("fieldName"),e=o.options.fields[n];i[n]&&("fixed"!=e.visibility&&o._changeColumnVisibilityInternal(n,i[n].columnVisibility),a.data("width-in-percent",i[n].columnWidth).css("width",i[n].columnWidth+"%"))})}}})})(jQuery);(function(t){var e=t.hik.jtable.prototype._removeRowsFromTable;t.extend(!0,t.hik.jtable.prototype,{options:{openChildAsAccordion:!1},openChildTable:function openChildTable(o,a,e){var i=this;void 0==a.jqueryuiTheme&&(a.jqueryuiTheme=i.options.jqueryuiTheme);a.showCloseButton=!1!=a.showCloseButton;a.showCloseButton&&!a.closeRequested&&(a.closeRequested=function(){i.closeChildTable(o)});i.options.openChildAsAccordion&&o.siblings(".jtable-data-row").each(function(){i.closeChildTable(t(this))});i.closeChildTable(o,function(){var n=i.getChildRow(o).children("td").empty(),s=t("<div />").addClass("jtable-child-table-container").appendTo(n);n.data("childTable",s);s.jtable(a);i.openChildRow(o);s.hide().slideDown("fast",function(){e&&e({childTable:s})})})},closeChildTable:function closeChildTable(t,o){var a=this,i=this.getChildRow(t).children("td"),n=i.data("childTable");n?(i.data("childTable",null),n.slideUp("fast",function(){n.jtable("destroy");n.remove();a.closeChildRow(t);o&&o()})):o&&o()},isChildRowOpen:function isChildRowOpen(e){return this.getChildRow(e).is(":visible")},getChildRow:function getChildRow(e){return e.data("childRow")||this._createChildRow(e)},openChildRow:function openChildRow(e){e=this.getChildRow(e);e.is(":visible")||e.show();return e},closeChildRow:function closeChildRow(e){e=this.getChildRow(e);e.is(":visible")&&e.hide()},_removeRowsFromTable:function _removeRowsFromTable(o,a){"deleted"==a&&o.each(function(){var e=t(this).data("childRow");e&&e.remove()});e.apply(this,arguments)},_createChildRow:function _createChildRow(e){var o=this._$table.find("thead th").length,o=t("<tr></tr>").addClass("jtable-child-row").append("<td colspan=\""+o+"\"></td>");e.after(o);e.data("childRow",o);o.hide();return o}})})(jQuery);(function(e){e.extend(!0,e.hik.jtable.prototype.options.messages,{serverCommunicationError:"Erreur de communication avec le serveur.",loadingMessage:"Chargement des donn\xE9es...",noDataAvailable:"Aucune donn\xE9e !",addNewRecord:"Ajouter",editRecord:"Editer",areYouSure:"Etes-vous s\xFBr ?",deleteConfirmation:"Cet enregistrement sera supprim\xE9. Continuer ?",save:"Sauvegarder",saving:"Sauvegarde en cours...",cancel:"Annuler",deleteText:"Supprimer",deleting:"Supression en cours...",error:"Erreur",close:"Fermer",cannotLoadOptionsFor:"Impossible de charger les donn\xE9es du champ {0}",pagingInfo:"Afficher {0} \xE0 {1} de {2}",canNotDeletedRecords:"Impossible de supprimer {0} sur {1} enregistrement(s)!",deleteProggress:"Supression {0} sur {1} enregistrement(s), en cours d'ex\xE9cution...",pageSizeChangeLabel:"Nombre d'enregistrements",gotoPageLabel:"Aller \xE0 la page"})})(jQuery)});
//# sourceMappingURL=jtable.min.js.map
